# 소개

Pashov Audit Group은 업계 최고의 스마트 계약 보안 연구원들로 구성된 여러 팀으로 이루어져 있습니다. 1000개 이상의 보안 취약점을 보고한 이 그룹은 절대적으로 최고의 감사 여정을 만들기 위해 노력합니다. 100% 보안을 보장할 수는 없지만, 블록체인 프로토콜을 위해 경험이 풍부한 연구원들의 최선의 노력을 보장합니다. 이전 작업은 [여기](https://github.com/pashov/audits)에서 확인하거나 Twitter [@pashovkrum](https://twitter.com/pashovkrum)으로 연락할 수 있습니다.

# 면책 조항

스마트 계약 보안 검토는 취약점의 완전한 부재를 절대 확인할 수 없습니다. 이는 시간, 자원 및 전문 지식이 제한된 노력으로 최대한 많은 취약점을 찾으려고 노력하는 것입니다. 검토 후 100% 보안을 보장할 수 없으며, 검토가 스마트 계약의 문제를 발견할 것이라고 보장할 수도 없습니다. 후속 보안 검토, 버그 바운티 프로그램 및 온체인 모니터링을 강력히 권장합니다.

# 소개

**aave/gho-wrapper** 리포지토리에 대한 시간 제한 보안 검토가 **Pashov Audit Group**에 의해 수행되었으며, 애플리케이션의 스마트 계약 구현의 보안 측면에 중점을 두었습니다.

# GHO Wrapper 소개

GHO Wrapper는 GHO ERC20 토큰을 래핑(wrap)하여 원활한 통합을 위한 예치(deposits), 인출(withdrawals) 및 퍼밋(permit) 기반 승인을 가능하게 하는 스마트 계약입니다. 토큰 메타데이터(이름 및 심볼)는 구성 가능하여 배포자가 초기화 중에 사용자 지정 값을 설정할 수 있습니다.

# 위험 분류

| 심각도 | 영향: 높음 | 영향: 중간 | 영향: 낮음 |
| --- | --- | --- | --- |
| **가능성: 높음** | 치명적 (Critical) | 높음 (High) | 중간 (Medium) |
| **가능성: 중간** | 높음 (High) | 중간 (Medium) | 낮음 (Low) |
| **가능성: 낮음** | 중간 (Medium) | 낮음 (Low) | 낮음 (Low) |

## 영향 (Impact)

- 높음 - 프로토콜 자산의 상당한 물질적 손실을 초래하거나 사용자 그룹에 심각한 해를 끼칩니다.

- 중간 - 프로토콜 자산의 중간 정도의 물질적 손실을 초래하거나 사용자 그룹에 적당한 해를 끼칩니다.

- 낮음 - 프로토콜 자산의 경미한 물질적 손실을 초래하거나 소규모 사용자 그룹에 해를 끼칩니다.

## 가능성 (Likelihood)

- 높음 - 온체인 조건을 모방하는 합리적인 가정으로 공격 경로가 가능하며, 공격 비용이 도난당하거나 손실될 수 있는 자금의 양에 비해 상대적으로 낮습니다.

- 중간 - 조건부로 인센티브가 주어지는 공격 벡터일 뿐이지만 여전히 발생 가능성이 상대적으로 높습니다.

- 낮음 - 너무 많거나 너무 그럴듯하지 않은 가정이 있거나 인센티브가 거의 또는 전혀 없는 공격자의 상당한 지분을 필요로 합니다.

## 심각도 수준에 따른 조치 필요

- 치명적 - 가능한 한 빨리 수정해야 함 (이미 배포된 경우)

- 높음 - 수정해야 함 (아직 배포되지 않은 경우 배포 전)

- 중간 - 수정해야 함 (Should fix)

- 낮음 - 수정할 수 있음 (Could fix)

# 보안 평가 요약

_검토 커밋 해시_ - [57fcab6d61b20eea96f5fce1e88b2f7d4438cbf8](https://github.com/aave/gho-wrapper/tree/57fcab6d61b20eea96f5fce1e88b2f7d4438cbf8)

### 범위

다음 스마트 계약이 감사 범위에 포함되었습니다:

- `WrappedGhoToken`

# 발견 사항

# [L-01] 비상 퍼밋(permit) 서명 취소 메커니즘 추가

`WrappedGhoToken`은 가스 없는 토큰 승인을 위해 `ERC20PermitUpgradeable`을 사용합니다. 사용자는 동일한 논스(nonce)로 새 서명을 생성하고 이전 서명을 무효화하기 위해 트랜잭션을 제출하여 기술적으로 이전 퍼밋 서명을 무효화할 수 있지만, 이 과정은 서명 생성 및 트랜잭션 제출이 필요하므로 긴급 상황에는 적합하지 않을 수 있습니다. 비상 상황에서는 더 빠르고 간단한 취소 메커니즘이 보안을 강화할 것입니다.

사용자가 비상 상황에서 서명을 취소하기 위해 호출할 수 있는 직접적인 `nonce` 무효화 기능을 추가하는 것을 고려하십시오:

```solidity
    function invalidatePermitNonce() external returns (uint256) {
        return _useNonce(msg.sender);
    }
```
